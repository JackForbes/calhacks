<div ng-controller="PostsController as postsCtrl" layout layout-align="start start">

  <!-- List of Posts -->
  <div layout="column" layout-align="start start" flex="64" flex-sm="100" layout-padding>

    <!-- Input -->
    <div class="full" layout layout-align="space-between start">
      <div layout layout-align="start start">
        <md-autocomplete
            class="input-city"
            md-selected-item="ctrl.input.selectedCity"
            md-search-text-change="ctrl.searchTextChange(ctrl.searchText)"
            md-search-text="ctrl.searchText"
            md-selected-item-change="ctrl.selectedItemChange(item)"
            md-items="city in ctrl.querySearch(ctrl.searchText)"
            md-item-text="city.display"
            md-min-length="0"
            md-floating-label="City">
          <md-item-template>
            <span md-highlight-text="ctrl.searchText" md-highlight-flags="^i">{{ city.display }}</span>
          </md-item-template>
          <md-not-found>
            No matches found for "{{ ctrl.searchText }}".
          </md-not-found>
        </md-autocomplete>

        <md-input-container class="input-duration">
          <label>4-8</label>
          <input type="number" step="any" name="duration" ng-model="ctrl.input.duration" min="4" max="8" aria-label="Duration">
        </md-input-container>

        <md-input-container class="input-start">
          <label>Start</label>
          <md-select name="start" ng-model="ctrl.input.start">
            <md-option ng-repeat="month in ctrl.months" value="{{month}}">
              {{ month }}
            </md-option>
          </md-select>
        </md-input-container>
      </div>

      <md-button class="md-icon-button" ng-click="postsCtrl.toggleFilters()" aria-label="Filters">
        <md-tooltip>Filters</md-tooltip>
        <md-icon md-svg-icon="content:filter_list"></md-icon>
      </md-button>
    </div>

    <div ng-if="postsCtrl.showFilters">
      Advanced Filters
    </div>

    <!-- Posts -->
    <div class="posts full">
      <div>
        <md-grid-list md-cols="1" md-cols-gt-md="2" md-row-height="3:2" md-gutter="5px">
          <md-grid-tile ng-repeat="post in postsCtrl.mockPosts">
              <div class="tile full" layout="column">

                <div class="tile-content">
                  <!-- Tile Image -->
                  <div class="tile-image" layout="column" layout-align="space-between center" ng-style="{ 'background-image': 'url(' + post.imgSrc + ')' }">
                    <div class="full" layout layout-align="space-between start">
                      <md-button md-no-ink class="md-icon-button" ng-click="postsCtrl.favPost()" aria-label="Bookmark">
                        <md-tooltip>{{ post.bookmarked ? 'Bookmarked' : 'Bookmark' }}</md-tooltip>
                        <md-icon class="bookmark" md-svg-icon="action:favorite" ng-style="{ 'opacity': post.bookmarked ? '1' : '0.5' }"></md-icon>
                      </md-button>
                      <md-button md-no-ink ng-if="post.verified" class="md-icon-button" aria-label="Verified">
                        <md-tooltip>Verified</md-tooltip>
                        <md-icon class="verified" md-svg-icon="action:check_circle"></md-icon>
                      </md-button>
                    </div>
                    <div class="full" layout layout-align="space-between start">
                      <div class="tile-image-price">
                        <h2>${{ post.price }}</h2>
                      </div>
                      <div>
                        <img class="tile-image-headshot" ng-src="{{post.profileImgSrc}}" alt="{{post.name}}" />
                      </div>
                    </div>
                  </div>

                  <!-- Tile Info -->
                  <div class="tile-info">
                    <h3 class="tile-info-title">{{ post.title }}</h3>
                    <div layout>
                      <h4 class="tile-info-subtitle">{{ post.size }}</h4>
                      <h4 class="tile-info-stars">{{ post.rating }}</h4>
                      <md-icon class="tile-info-stars-icon" md-svg-icon="action:stars"></md-icon>
                    </div>
                  </div>
                </div>

                <!-- Tenant Avatar -->
                <div class="tile-avatars">
                  <md-icon ng-repeat="tenant in post.tenants" class="tile-avatar-anonymous" md-svg-icon="action:account_circle">
                    <md-tooltip>Prior Tenant</md-tooltip>
                  </md-icon>
                </div>

              </div>
          </md-grid-tile>
        </md-grid-list>
      </div>
    </div>

  </div>

  <!-- Map View -->
  <div hide-sm flex="36">
    MAP VIEW
  </div>
</div>
